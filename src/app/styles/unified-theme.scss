/* ============================================================================
   UNIFIED THEME SYSTEM - GLOBAL STYLES
   ============================================================================ */

/* CSS Custom Properties for Theme System */
:root {
  /* Theme Colors */
  --theme-primary: #4A50E0;
  --theme-accent: #6366f1;
  --theme-background: #ffffff;
  --theme-surface: #f8f9fa;
  --theme-text: #1a1a1a;
  
  /* Typography */
  --theme-font-size: 16px;
  --theme-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --theme-font-weight: 400;
  --theme-line-height: 1.5;
  
  /* Layout */
  --theme-border-radius: 8px;
  --theme-spacing-scale: 1;
  
  /* Effects */
  --theme-animations: all 0.3s ease;
  --theme-shadows: 0 2px 8px rgba(0,0,0,0.1);
  --theme-blur: blur(10px);
}

/* Base Typography Styles */
body {
  font-family: var(--theme-font-family);
  font-size: var(--theme-font-size);
  font-weight: var(--theme-font-weight);
  line-height: var(--theme-line-height);
  color: var(--theme-text);
  background-color: var(--theme-background);
  transition: var(--theme-animations);
}

/* Theme-aware Components */
.theme-primary {
  color: var(--theme-primary) !important;
}

.theme-accent {
  color: var(--theme-accent) !important;
}

.theme-bg-primary {
  background-color: var(--theme-primary) !important;
}

.theme-bg-accent {
  background-color: var(--theme-accent) !important;
}

.theme-bg-surface {
  background-color: var(--theme-surface) !important;
}

.theme-border-radius {
  border-radius: var(--theme-border-radius) !important;
}

/* Spacing Scale */
.theme-p-1 { padding: calc(0.25rem * var(--theme-spacing-scale)) !important; }
.theme-p-2 { padding: calc(0.5rem * var(--theme-spacing-scale)) !important; }
.theme-p-3 { padding: calc(1rem * var(--theme-spacing-scale)) !important; }
.theme-p-4 { padding: calc(1.5rem * var(--theme-spacing-scale)) !important; }
.theme-p-5 { padding: calc(3rem * var(--theme-spacing-scale)) !important; }

.theme-m-1 { margin: calc(0.25rem * var(--theme-spacing-scale)) !important; }
.theme-m-2 { margin: calc(0.5rem * var(--theme-spacing-scale)) !important; }
.theme-m-3 { margin: calc(1rem * var(--theme-spacing-scale)) !important; }
.theme-m-4 { margin: calc(1.5rem * var(--theme-spacing-scale)) !important; }
.theme-m-5 { margin: calc(3rem * var(--theme-spacing-scale)) !important; }

/* Theme Density Classes */
.theme-compact {
  --theme-spacing-scale: 0.75;
  
  .btn {
    padding: calc(0.375rem * var(--theme-spacing-scale)) calc(0.75rem * var(--theme-spacing-scale));
    font-size: calc(0.875rem * var(--theme-spacing-scale));
  }
  
  .form-control {
    padding: calc(0.375rem * var(--theme-spacing-scale)) calc(0.75rem * var(--theme-spacing-scale));
    font-size: calc(0.875rem * var(--theme-spacing-scale));
  }
  
  .card {
    padding: calc(1rem * var(--theme-spacing-scale));
  }
}

.theme-comfortable {
  --theme-spacing-scale: 1.25;
  
  .btn {
    padding: calc(0.5rem * var(--theme-spacing-scale)) calc(1rem * var(--theme-spacing-scale));
    font-size: calc(1rem * var(--theme-spacing-scale));
  }
  
  .form-control {
    padding: calc(0.5rem * var(--theme-spacing-scale)) calc(1rem * var(--theme-spacing-scale));
    font-size: calc(1rem * var(--theme-spacing-scale));
  }
  
  .card {
    padding: calc(1.5rem * var(--theme-spacing-scale));
  }
}

/* High Contrast Theme */
.theme-high-contrast {
  --theme-primary: #000000;
  --theme-accent: #333333;
  --theme-background: #ffffff;
  --theme-surface: #f5f5f5;
  --theme-text: #000000;
  --theme-shadows: none;
  
  * {
    border-color: #000000 !important;
  }
  
  .btn {
    border-width: 2px !important;
    font-weight: bold !important;
  }
  
  a {
    text-decoration: underline !important;
    font-weight: bold !important;
  }
}

/* Reduced Motion */
.theme-reduced-motion,
.theme-no-animations {
  --theme-animations: none;
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* No Shadows */
.theme-no-shadows {
  --theme-shadows: none;
  
  *,
  *::before,
  *::after {
    box-shadow: none !important;
    text-shadow: none !important;
  }
}

/* Bootstrap Component Overrides */
.btn {
  border-radius: var(--theme-border-radius);
  transition: var(--theme-animations);
  box-shadow: var(--theme-shadows);
  
  &.btn-primary {
    background-color: var(--theme-primary);
    border-color: var(--theme-primary);
    
    &:hover {
      background-color: color-mix(in srgb, var(--theme-primary) 85%, black);
      border-color: color-mix(in srgb, var(--theme-primary) 85%, black);
    }
  }
}

.card {
  border-radius: var(--theme-border-radius);
  background-color: var(--theme-surface);
  box-shadow: var(--theme-shadows);
  transition: var(--theme-animations);
}

.form-control,
.form-select {
  border-radius: var(--theme-border-radius);
  transition: var(--theme-animations);
  
  &:focus {
    border-color: var(--theme-primary);
    box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--theme-primary) 25%, transparent);
  }
}

.modal-content {
  border-radius: var(--theme-border-radius);
  background-color: var(--theme-surface);
}

.dropdown-menu {
  border-radius: var(--theme-border-radius);
  background-color: var(--theme-surface);
  box-shadow: var(--theme-shadows);
}

.navbar {
  backdrop-filter: var(--theme-blur);
  -webkit-backdrop-filter: var(--theme-blur);
}

/* Dark Theme Overrides */
[data-bs-theme="dark"] {
  --theme-background: #0d1117;
  --theme-surface: #161b22;
  --theme-text: #e6edf3;
  
  /* Bootstrap variable overrides for dark mode */
  --bs-body-bg: #0d1117;
  --bs-body-color: #e6edf3;
  --bs-border-color: #30363d;
  --bs-secondary-bg: #21262d;
  --bs-tertiary-bg: #161b22;
  
  .theme-bg-surface {
    background-color: var(--theme-surface) !important;
  }
  
  /* Card dark mode */
  .card {
    background-color: var(--theme-surface);
    border-color: #30363d;
    color: var(--theme-text);
  }
  
  /* Form controls dark mode */
  .form-control,
  .form-select {
    background-color: #21262d;
    border-color: #30363d;
    color: var(--theme-text);
    
    &:focus {
      background-color: #21262d;
      border-color: var(--theme-primary);
      color: var(--theme-text);
    }
    
    &::placeholder {
      color: #8b949e;
    }
  }
  
  /* Button dark mode */
  .btn-outline-primary {
    color: var(--theme-primary);
    border-color: var(--theme-primary);
    
    &:hover {
      background-color: var(--theme-primary);
      border-color: var(--theme-primary);
      color: white;
    }
  }
  
  /* Dropdown dark mode */
  .dropdown-menu {
    background-color: #21262d;
    border-color: #30363d;
    
    .dropdown-item {
      color: var(--theme-text);
      
      &:hover,
      &:focus {
        background-color: #30363d;
        color: var(--theme-text);
      }
    }
  }
  
  /* Modal dark mode */
  .modal-content {
    background-color: var(--theme-surface);
    border-color: #30363d;
    color: var(--theme-text);
  }
  
  /* Table dark mode */
  .table {
    color: var(--theme-text);
    
    th,
    td {
      border-color: #30363d;
    }
  }
  
  /* Alert dark mode */
  .alert {
    border-color: #30363d;
  }
  
  /* Badge dark mode */
  .badge {
    &.bg-secondary {
      background-color: #6e7681 !important;
    }
  }
  
  /* Enhanced Form Elements */
  .form-label,
  label {
    color: var(--theme-text) !important;
  }
  
  .form-check-label {
    color: var(--theme-text) !important;
  }
  
  .form-text {
    color: rgba(230, 237, 243, 0.7) !important;
  }
  
  /* Input Group */
  .input-group-text {
    background-color: #21262d !important;
    border-color: #30363d !important;
    color: var(--theme-text) !important;
  }
  
  /* Buttons comprehensive coverage */
  .btn {
    &:not(.btn-primary):not(.btn-secondary):not(.btn-success):not(.btn-danger):not(.btn-warning):not(.btn-info):not(.btn-light):not(.btn-dark) {
      color: var(--theme-text) !important;
    }
  }
  
  .btn-secondary {
    background-color: #30363d !important;
    border-color: #30363d !important;
    color: var(--theme-text) !important;
    
    &:hover, &:focus {
      background-color: #484f58 !important;
      border-color: #484f58 !important;
      color: var(--theme-text) !important;
    }
  }
  
  .btn-outline-secondary {
    color: #8b949e !important;
    border-color: #30363d !important;
    
    &:hover, &:focus {
      background-color: #30363d !important;
      border-color: #30363d !important;
      color: var(--theme-text) !important;
    }
  }
  
  /* Lists */
  .list-group-item {
    background-color: var(--theme-surface) !important;
    border-color: #30363d !important;
    color: var(--theme-text) !important;
    
    &:hover {
      background-color: #21262d !important;
    }
    
    &.active {
      background-color: var(--theme-primary) !important;
      border-color: var(--theme-primary) !important;
    }
  }
  
  /* Navbar comprehensive */
  .navbar {
    background-color: var(--theme-surface) !important;
    border-color: #30363d !important;
    
    .navbar-nav .nav-link {
      color: var(--theme-text) !important;
      
      &:hover, &:focus {
        color: var(--theme-primary) !important;
      }
      
      &.active {
        color: var(--theme-primary) !important;
      }
    }
    
    .navbar-brand {
      color: var(--theme-text) !important;
    }
    
    .navbar-text {
      color: rgba(230, 237, 243, 0.7) !important;
    }
  }
  
  /* Breadcrumb */
  .breadcrumb {
    background-color: var(--theme-surface) !important;
    
    .breadcrumb-item {
      color: rgba(230, 237, 243, 0.7) !important;
      
      &.active {
        color: var(--theme-text) !important;
      }
      
      a {
        color: var(--theme-primary) !important;
      }
    }
  }
  
  /* Pagination */
  .pagination {
    .page-link {
      background-color: var(--theme-surface) !important;
      border-color: #30363d !important;
      color: var(--theme-text) !important;
      
      &:hover {
        background-color: #21262d !important;
        border-color: var(--theme-primary) !important;
        color: var(--theme-primary) !important;
      }
    }
    
    .page-item.active .page-link {
      background-color: var(--theme-primary) !important;
      border-color: var(--theme-primary) !important;
    }
    
    .page-item.disabled .page-link {
      background-color: #161b22 !important;
      border-color: #21262d !important;
      color: #6e7681 !important;
    }
  }
  
  /* Progress bars */
  .progress {
    background-color: #21262d !important;
    
    .progress-bar {
      background-color: var(--theme-primary) !important;
    }
  }
  
  /* Accordion */
  .accordion {
    .accordion-item {
      background-color: var(--theme-surface) !important;
      border-color: #30363d !important;
      
      .accordion-header .accordion-button {
        background-color: var(--theme-surface) !important;
        color: var(--theme-text) !important;
        
        &:not(.collapsed) {
          background-color: #21262d !important;
          color: var(--theme-primary) !important;
        }
        
        &:focus {
          border-color: var(--theme-primary) !important;
          box-shadow: 0 0 0 0.25rem rgba(74, 80, 224, 0.25) !important;
        }
      }
      
      .accordion-body {
        background-color: var(--theme-background) !important;
        color: var(--theme-text) !important;
      }
    }
  }
  
  /* Spinners */
  .spinner-border,
  .spinner-grow {
    color: var(--theme-primary) !important;
  }
  
  /* Text colors */
  .text-muted {
    color: #8b949e !important;
  }
  
  .text-secondary {
    color: #8b949e !important;
  }
  
  /* Ensure all text is visible */
  h1, h2, h3, h4, h5, h6 {
    color: var(--theme-text) !important;
  }
  
  p, span, div {
    color: var(--theme-text);
  }
  
  /* Links */
  a {
    color: var(--theme-primary) !important;
    
    &:hover {
      color: #8c9eff !important;
    }
  }
}

/* Font Family Variations */
body.theme-font-serif {
  --theme-font-family: Georgia, "Times New Roman", serif;
}

body.theme-font-mono {
  --theme-font-family: "Fira Code", "Cascadia Code", Consolas, monospace;
}

/* Font Size Variations */
body.theme-font-small {
  --theme-font-size: 14px;
}

body.theme-font-large {
  --theme-font-size: 18px;
}

body.theme-font-extra-large {
  --theme-font-size: 20px;
}

/* Font Weight Variations */
body.theme-font-light {
  --theme-font-weight: 300;
}

body.theme-font-medium {
  --theme-font-weight: 500;
}

body.theme-font-bold {
  --theme-font-weight: 700;
}

/* Line Height Variations */
body.theme-line-height-tight {
  --theme-line-height: 1.25;
}

body.theme-line-height-relaxed {
  --theme-line-height: 1.75;
}

/* Border Radius Variations */
body.theme-border-radius-none {
  --theme-border-radius: 0;
}

body.theme-border-radius-small {
  --theme-border-radius: 4px;
}

body.theme-border-radius-large {
  --theme-border-radius: 12px;
}

body.theme-border-radius-full {
  --theme-border-radius: 9999px;
}

/* Animation and Effect Utilities */
.theme-animate {
  transition: var(--theme-animations);
}

.theme-shadow {
  box-shadow: var(--theme-shadows);
}

.theme-blur {
  backdrop-filter: var(--theme-blur);
  -webkit-backdrop-filter: var(--theme-blur);
}

/* Responsive Theme Adjustments */
@media (max-width: 768px) {
  .theme-compact {
    --theme-spacing-scale: 0.6;
  }
  
  .theme-comfortable {
    --theme-spacing-scale: 1.1;
  }
}

/* Print Styles */
@media print {
  body {
    --theme-background: #ffffff !important;
    --theme-surface: #ffffff !important;
    --theme-text: #000000 !important;
    --theme-shadows: none !important;
    --theme-animations: none !important;
  }
  
  .theme-no-print {
    display: none !important;
  }
}

/* Accessibility Improvements */
@media (prefers-reduced-motion: reduce) {
  :root {
    --theme-animations: none;
  }
}

@media (prefers-contrast: high) {
  :root {
    --theme-primary: #000000;
    --theme-accent: #333333;
    --theme-shadows: none;
  }
}

/* Focus Indicators */
.theme-focus-visible:focus-visible {
  outline: 2px solid var(--theme-primary);
  outline-offset: 2px;
}

/* Theme Transition Classes */
.theme-transition-fast {
  transition: all 0.15s ease !important;
}

.theme-transition-slow {
  transition: all 0.5s ease !important;
}

.theme-transition-none {
  transition: none !important;
}