@import 'bootstrap/scss/functions';
@import 'bootstrap/scss/variables';
@import 'bootstrap/scss/mixins';

// Main layout styles with proper space segregation
.main-layout {
  display: flex; // Flex row layout: sidenav | content-wrapper
  min-height: 100vh;
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  position: relative;
  z-index: 1;
}

// Content wrapper that adjusts based on sidenav state
.content-wrapper {
  flex: 1; // Takes remaining space after sidenav
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  
  // When sidenav is present and not in overlay mode (desktop)
  &.with-sidenav {
    @include media-breakpoint-up(lg) {
      // Expanded state - sidenav takes 280px
      &.sidenav-expanded {
        margin-left: 280px;
        width: calc(100% - 280px);
      }
      
      // Collapsed state - sidenav takes 70px
      &.sidenav-collapsed {
        margin-left: 70px;
        width: calc(100% - 70px);
      }
    }
  }
  
  // Mobile/tablet responsive - full width when overlay mode
  @include media-breakpoint-down(lg) {
    margin-left: 0 !important;
    width: 100% !important;
  }
}

.main-header {
  // Header is now fixed positioned, no need for relative positioning
  flex-shrink: 0;
  width: 100%;
  height: 0; // Don't take up layout space since header is fixed
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  
  &.with-header {
    padding-top: 72px; /* Account for fixed header height */
    min-height: calc(100vh - 72px);
  }
  
  &.with-footer {
    padding-bottom: 0; /* Footer handles its own spacing */
  }
}

.main-footer {
  flex-shrink: 0;
  width: 100%;
}

// Theme-specific adjustments
[data-bs-theme="dark"] {
  .main-layout {
    background-color: var(--bs-dark);
    color: var(--bs-light);
  }
}

// Mobile responsive adjustments
@include media-breakpoint-down(md) {
  .main-content {
    &.with-header {
      padding-top: 60px; /* Smaller header on mobile */
      min-height: calc(100vh - 60px);
    }
  }
}

// Accessibility improvements
@media (prefers-reduced-motion: reduce) {
  .content-wrapper,
  .main-header {
    transition: none;
  }
}

// Print styles
@media print {
  .main-header,
  .main-footer {
    display: none;
  }
  
  .content-wrapper {
    margin-left: 0 !important;
    width: 100% !important;
  }
}