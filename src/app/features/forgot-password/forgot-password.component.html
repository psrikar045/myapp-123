<div class="forgot-password-page-wrapper" [class.dark-theme]="isDarkMode">
  <div class="forgot-password-container" mat-typography>
    <div class="forgot-password-left">
      <div class="navigation-header">
        <a (click)="backToLogin()" class="back-link" i18n="@@backToLoginLink">
          <mat-icon>arrow_back</mat-icon> Back to login
        </a>
      </div>
      <img src="images/logo.svg" alt="TravelWise Logo" class="logo" i18n-alt="@@logoAltText">
      <div class="panel-spacer-top"></div>
      <div class="forgot-password-panel">
        <h2 i18n="@@forgotPasswordTitle">Forgot your password?</h2>
        <p class="subtitle" i18n="@@forgotPasswordSubtitle">Don't worry, happens to all of us. Enter your email below to recover your password</p>

        <div *ngIf="errorMessage" class="error-message" role="alert">
          {{ errorMessage }}
        </div>

        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label i18n="@@emailLabel">Email</mat-label>
            <input matInput formControlName="email" placeholder="your.email@example.com" i18n-placeholder="@@emailPlaceholder" required autofocus>
            <button mat-icon-button matSuffix *ngIf="email.value" (click)="clearEmail()" type="button" aria-label="Clear email" i18n-aria-label="@@clearEmailAriaLabel">
              <mat-icon>close</mat-icon>
            </button>
            <mat-error *ngIf="email.hasError('required')" i18n="@@emailRequiredError">
              Email is required.
            </mat-error>
            <mat-error *ngIf="email.hasError('email') && !email.hasError('required')" i18n="@@emailInvalidError">
              Please enter a valid email address.
            </mat-error>
          </mat-form-field>

          <button mat-raised-button color="primary" type="submit" class="full-width submit-button" [disabled]="forgotPasswordForm.invalid || isLoading">
            <span *ngIf="!isLoading" i18n="@@submitButtonText">Submit</span>
            <mat-spinner *ngIf="isLoading" diameter="24" class="button-spinner"></mat-spinner>
          </button>
        </form>

        <div class="divider">
          <span i18n="@@orLoginWithDivider">Or login with</span>
        </div>

        <div class="social-buttons" *ngIf="iconsRegistered">
          <button mat-stroked-button class="social-button" aria-label="Login with Google" i18n-aria-label="@@loginWithGoogleAriaLabel">
            <mat-icon svgIcon="google"></mat-icon>
          </button>
          <button mat-stroked-button class="social-button" aria-label="Login with Facebook" i18n-aria-label="@@loginWithFacebookAriaLabel">
            <mat-icon svgIcon="facebook"></mat-icon>
          </button>
          <button mat-stroked-button class="social-button" aria-label="Login with Apple" i18n-aria-label="@@loginWithAppleAriaLabel">
            <mat-icon svgIcon="apple"></mat-icon>
          </button>
        </div>

        <!-- Optional: Dark mode toggle if needed, remove if not -->
        <div class="dark-mode-toggle-container" *ngIf="iconsRegistered">
            <mat-slide-toggle [checked]="(themeService.isDarkMode$ | async)!" (change)="toggleDarkMode()" i18n="@@darkModeLabel">
              Dark Mode
            </mat-slide-toggle>
            <mat-icon svgIcon="moon" class="toggle-icon moon-icon"></mat-icon>
            <mat-icon svgIcon="sun" class="toggle-icon sun-icon"></mat-icon>
        </div>

      </div>
      <div class="panel-spacer-bottom"></div>
    </div>

    <div class="forgot-password-right">
      <div class="carousel-container">
        <img *ngFor="let image of GALLERY_IMAGE_PATHS; let i = index"
             [src]="image"
             alt="Gallery image {{i + 1}}"
             i18n-alt="@@galleryImageAltText"
             class="carousel-image"
             [class.active]="i === currentImageIndex"
             loading="lazy">
      </div>
    </div>
  </div>
</div>
