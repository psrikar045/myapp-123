<!-- Bootstrap Responsive Blog Page -->
<div class="blog-page-container">
  
  <!-- Enhanced Hero Section -->
  <div class="blog-hero-section bg-primary text-white py-5">
    <div class="container">
      <div class="row justify-content-center text-center blog-hero-text">
        <div class="col-lg-8 col-md-10 col-12">
          <div class="hero-content">
            <!-- <div class="hero-icon mb-4">
              <i class="bi bi-journal-richtext display-1"></i>
            </div> -->
            <h1 class="display-4 fw-bold mb-3 hero-title">{{ hero.title }}</h1>
            <p class="lead mb-4 hero-subtitle">{{ hero.subtitle }}</p>
            <div class="hero-stats d-flex justify-content-center gap-4 flex-wrap">
              <div class="stat-item">
                <div class="stat-number">{{ blogs.length }}+</div>
                <div class="stat-label">Articles</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">50K+</div>
                <div class="stat-label">Readers</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">Weekly</div>
                <div class="stat-label">Updates</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="blog-content-section container pad100 py-5">
    <div class="container">
      
      <!-- Search and Filter Bar -->
      <div class="blog-filters mb-5">
        <div class="row align-items-stretch g-3">
          <div class="col-lg-6 col-md-8 col-12">
            <div class="modern-search-box">
              <div class="search-input-wrapper" [class.focused]="isSearchFocused">
                <div class="search-icon">
                  <i class="bi" [ngClass]="isSearching ? 'bi-arrow-clockwise spin' : 'bi-search'"></i>
                </div>
                <input 
                  type="text" 
                  class="search-input" 
                  placeholder="Search articles, authors, categories..."
                  [(ngModel)]="searchTerm"
                  (input)="onSearchInput($event)"
                  (keyup.enter)="onSearch()"
                  (focus)="onSearchFocus()"
                  (blur)="onSearchBlur()"
                  autocomplete="off">
                <button 
                  *ngIf="searchTerm" 
                  class="clear-btn" 
                  type="button"
                  (click)="clearSearch()"
                  title="Clear search">
                  <i class="bi bi-x-lg"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-4 col-12">
            <div class="filter-options d-flex justify-content-md-end justify-content-start align-items-center gap-3">
              <div class="filter-dropdown">
                <select 
                  class="modern-select" 
                  [(ngModel)]="selectedCategory"
                  (change)="onCategoryChange(selectedCategory)">
                  <option>All Categories</option>
                  <option>Technology</option>
                  <option>Design</option>
                  <option>Business</option>
                  <option>Marketing</option>
                </select>
                <i class="bi bi-chevron-down dropdown-icon"></i>
              </div>
              <div class="filter-dropdown">
                <select 
                  class="modern-select" 
                  [(ngModel)]="selectedSort"
                  (change)="onSortChange(selectedSort)">
                  <option>Latest</option>
                  <option>Popular</option>
                  <option>Oldest</option>
                </select>
                <i class="bi bi-chevron-down dropdown-icon"></i>
              </div>
              <div class="view-toggle-wrapper">
                <button 
                  class="btn btn-outline-secondary view-toggle-btn"
                  (click)="toggleViewMode()"
                  [title]="viewMode === 'list' ? 'Switch to Grid View' : 'Switch to List View'">
                  <i class="bi" [ngClass]="viewMode === 'list' ? 'bi-grid-3x3-gap' : 'bi-list-ul'"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Results Counter -->
      <div class="row mb-3" *ngIf="searchTerm || selectedCategory !== 'All Categories'">
        <div class="col-12">
          <div class="results-info d-flex align-items-center justify-content-between">
            <p class="text-muted mb-0">
              <i class="bi bi-search me-2"></i>
              Found {{ filteredBlogs.length }} result{{ filteredBlogs.length !== 1 ? 's' : '' }}
              <span *ngIf="searchTerm"> for "{{ searchTerm }}"</span>
              <span *ngIf="selectedCategory !== 'All Categories'"> in {{ selectedCategory }}</span>
            </p>
            <button 
              class="btn btn-outline-secondary btn-sm" 
              (click)="clearFilters()"
              *ngIf="searchTerm || selectedCategory !== 'All Categories'">
              <i class="bi bi-x-circle me-1"></i>Clear Filters
            </button>
          </div>
        </div>
      </div>
      
      <!-- Blog Posts Grid -->
      <div class="row g-4">
        <div class="col-12" [ngClass]="viewMode === 'list' ? 'col-lg-8' : 'col-12'">
          <div class="blog-posts-container">
            
            <!-- List View -->
            <div class="row g-4" *ngIf="pagedBlogs.length > 0 && viewMode === 'list'; else gridOrNoPosts">
              <div class="col-12" *ngFor="let blog of pagedBlogs; let i = index; trackBy: trackByBlog">
                <article class="blog-post-card card border-0 shadow-sm h-100 hover-lift" 
                         (click)="navigateToBlogDetails(i)"
                         style="cursor: pointer;"
                         role="button"
                         tabindex="0"
                         (keydown.enter)="navigateToBlogDetails(i)"
                         (keydown.space)="navigateToBlogDetails(i)">
                  <div class="row g-0 h-100">
                    <div class="col-md-8 col-12">
                      <div class="card-body p-4 h-100 d-flex flex-column">
                        <div class="blog-meta mb-3">
                          <div class="d-flex align-items-center justify-content-between flex-wrap">
                            <div class="meta-left d-flex align-items-center gap-2">
                              <span class="badge bg-primary">{{ blog.category || 'Article' }}</span>
                              <span class="reading-time text-muted">
                                <i class="bi bi-clock me-1"></i>5 min read
                              </span>
                            </div>
                            <small class="text-muted">{{ blog.date }}</small>
                          </div>
                        </div>
                        <h2 class="card-title fw-bold mb-3 lh-sm">{{ blog.title }}</h2>
                        <p class="card-text text-muted flex-grow-1 mb-3">{{ blog.summary }}</p>
                        <div class="blog-footer mt-auto">
                          <div class="d-flex align-items-center justify-content-between">
                            <div class="blog-author-info d-flex align-items-center">
                              <div class="author-avatar bg-primary text-white rounded-circle me-2 d-flex align-items-center justify-content-center"
                                   style="width: 36px; height: 36px; font-size: 0.9rem;">
                                {{ blog.author.charAt(0) || 'A' }}
                              </div>
                              <div class="author-details">
                                <div class="author-name fw-semibold text-dark">{{ blog.author }}</div>
                                <small class="text-muted">Marketing Expert</small>
                              </div>
                            </div>
                            <div class="blog-actions d-flex gap-1">
                              <button class="btn btn-outline-secondary btn-sm" (click)="$event.stopPropagation()">
                                <i class="bi bi-bookmark"></i>
                              </button>
                              <button class="btn btn-outline-secondary btn-sm" (click)="$event.stopPropagation()">
                                <i class="bi bi-share"></i>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4 col-12">
                      <div class="blog-image-wrapper h-100 position-relative"
                           (click)="navigateToBlogDetails(i)"
                           style="cursor: pointer;">
                        <img [src]="blog.img" 
                             [alt]="blog.title"
                             class="card-img h-100"
                             style="object-fit: cover; min-height: 200px;">
                        <div class="image-overlay">
                          <div class="overlay-content">
                            <i class="bi bi-arrow-right-circle-fill text-white display-6"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
            </div>

            <!-- Grid View -->
            <ng-template #gridOrNoPosts>
              <div class="row g-4" *ngIf="pagedBlogs.length > 0 && viewMode === 'grid'">
                <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-6 col-12" *ngFor="let blog of pagedBlogs; let i = index; trackBy: trackByBlog">
                  <article class="blog-grid-card card border-0 shadow-sm h-100 hover-lift" 
                           (click)="navigateToBlogDetails(i)"
                           style="cursor: pointer;"
                           role="button"
                           tabindex="0"
                           (keydown.enter)="navigateToBlogDetails(i)"
                           (keydown.space)="navigateToBlogDetails(i)">
                    <div class="card-img-wrapper position-relative">
                      <img [src]="blog.img" 
                           [alt]="blog.title"
                           class="card-img-top"
                           style="height: 200px; object-fit: cover;">
                      <div class="blog-grid-meta position-absolute top-0 end-0 m-3">
                        <span class="badge bg-primary">{{ blog.category || 'Web Development' }}</span>
                      </div>
                      <!-- <div class="reading-time-badge position-absolute bottom-0 start-0 m-3">
                        <span class="badge bg-dark bg-opacity-75 text-white">
                          <i class="bi bi-clock me-1"></i>2 mins Read
                        </span>
                      </div> -->
                    </div>
                    <div class="card-body p-4">
                      <h3 class="card-title fw-bold mb-3 lh-sm">{{ blog.title }}</h3>
                      <div class="blog-grid-stats d-flex align-items-center justify-content-between mb-3">
                        <div class="stats-left d-flex align-items-center gap-3">
                          <span class="stat-item text-muted small">
                            <i class="bi bi-eye me-1"></i>9,125
                          </span>
                          <span class="stat-item text-muted small">
                            <i class="bi bi-chat me-1"></i>3
                          </span>
                        </div>
                        <small class="text-muted">{{ blog.date }}</small>
                      </div>
                      <div class="blog-grid-author d-flex align-items-center">
                        <div class="author-avatar bg-primary text-white rounded-circle me-2 d-flex align-items-center justify-content-center"
                             style="width: 32px; height: 32px; font-size: 0.8rem;">
                          {{ blog.author.charAt(0) || 'A' }}
                        </div>
                        <div class="author-info">
                          <div class="author-name fw-semibold text-dark small">{{ blog.author }}</div>
                        </div>
                      </div>
                    </div>
                  </article>
                </div>
              </div>
              
              <!-- No Posts Message (for both views) -->
              <div class="text-center py-5" *ngIf="pagedBlogs.length === 0">
                <i class="bi bi-journal-text display-1 text-muted mb-3"></i>
                <h4 class="text-muted">No blog posts found</h4>
                <p class="text-muted">Check back later for new content</p>
              </div>
            </ng-template>
            

            
            <!-- Enhanced Pagination -->
            <div class="pagination-bottom-center-wrapper" *ngIf="filteredBlogs.length > currentPageSize">
              <div class="categories-pagination">
                <button class="page nav" 
                        [disabled]="currentPage === 1"
                        (click)="selectPage(currentPage === 1 ? 1 : currentPage - 1)">
                  <i class="bi bi-chevron-left"></i>
                </button>
                <!-- Show first page -->
                <button *ngIf="totalPages > 0" 
                        class="page" 
                        [class.active]="1 === currentPage" 
                        (click)="selectPage(1)">1</button>
                <!-- Show ellipsis if there are many pages and we're not near the beginning -->
                <span *ngIf="totalPages > 7 && currentPage > 4" class="page-ellipsis">...</span>
                <!-- Show middle pages (excluding first and last page) -->
                <button *ngFor="let page of getVisiblePages()" 
                        class="page" 
                        [class.active]="page === currentPage" 
                        (click)="selectPage(page)"
                        [style.display]="(page === 1 || page === totalPages) ? 'none' : 'flex'">{{ page }}</button>
                <!-- Show ellipsis if there are many pages and we're not near the end -->
                <span *ngIf="totalPages > 7 && currentPage < totalPages - 3" class="page-ellipsis">...</span>
                <!-- Show last page if different from first -->
                <button *ngIf="totalPages > 1" 
                        class="page" 
                        [class.active]="totalPages === currentPage" 
                        (click)="selectPage(totalPages)">{{ totalPages }}</button>
                <button class="page nav" 
                        [disabled]="currentPage === totalPages"
                        (click)="selectPage(currentPage === totalPages ? totalPages : currentPage + 1)">
                  <i class="bi bi-chevron-right"></i>
                </button>
              </div>
            </div>
            
          </div>
        </div>
        
        <!-- Sidebar - Only show in list view -->
        <div class="col-lg-4 col-12" *ngIf="viewMode === 'list'">
          <div class="blog-sidebar-container">
            
            <!-- Popular Posts -->
          <!-- (click)="navigateToBlogDetailsFromSidebar(cat.id || i)" -->
            <div class="sidebar-section card border-0 shadow-sm mb-4">
              <div class="card-header bg-white border-bottom-0 py-3">
                <h4 class="fw-bold mb-0">Popular Posts</h4>
              </div>
              <div class="card-body p-0">
                <div class="popular-post-item border-bottom p-3" 
                     *ngFor="let cat of displayedSidebarCategories; let i = index; let last = last"
                     [class.border-bottom-0]="last"
                     style="cursor: pointer;"
                     role="button"
                     tabindex="0">
                  <div class="d-flex">
                    <div class="popular-post-content flex-grow-1">
                      <h5 class="fw-semibold mb-1">{{ cat.title }}</h5>
                      <p class="text-muted small mb-2">{{ cat.description }}</p>
                      <div class="post-meta">
                        <small class="text-muted">
                          <i class="bi bi-person me-1"></i>{{ cat.author }}
                        </small>
                        <small class="text-muted ms-3">
                          <i class="bi bi-calendar me-1"></i>{{ cat.date }}
                        </small>
                      </div>
                    </div>
                    <div class="popular-post-image ms-3">
                      <img [src]="cat.img" 
                           alt="Post thumbnail"
                           class="rounded"
                           style="width: 60px; height: 60px; object-fit: cover;">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Categories -->
            <div class="sidebar-section card border-0 shadow-sm mb-4">
              <div class="card-header bg-white border-bottom-0 py-3">
                <h4 class="fw-bold mb-0">Categories</h4>
              </div>
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                  <span class="badge bg-light text-dark">Technology</span>
                  <span class="badge bg-light text-dark">Design</span>
                  <span class="badge bg-light text-dark">Business</span>
                  <span class="badge bg-light text-dark">Marketing</span>
                </div>
              </div>
            </div>
            
            <!-- Newsletter -->
            <div class="sidebar-section card border-0 shadow-sm">
              <div class="card-header bg-primary text-white py-3">
                <h4 class="fw-bold mb-0 clr-white">Newsletter</h4>
              </div>
              <div class="card-body">
                <p class="text-muted mb-3">Subscribe to get the latest posts delivered right to your inbox.</p>
                <div class="input-group">
                  <input type="email" class="form-control" placeholder="Your email">
                  <button class="btn btn-primary" type="button">
                    <i class="bi bi-envelope"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Show More/Less Button -->
            <div class="text-center mt-3" *ngIf="shouldShowMoreButton">
              <button class="btn btn-outline-primary" (click)="toggleSidebarCategories()">
                <i class="bi me-2" [ngClass]="hasMoreCategories ? 'bi-chevron-down' : 'bi-chevron-up'"></i>
                {{ hasMoreCategories ? 'Show More' : 'Show Less' }}
              </button>
            </div>
            
          </div>
        </div>
        
      </div>
    </div>
  </div>
  
</div>

