<!-- RIVO9 Search Page -->
<div class="search-page-container">
  <div class="search-content">
    
    <!-- Logo Section -->
    <div class="logo-section">
      <div class="logo-container">
        <img src="assets/images/logo.svg" 
             alt="RIVO9 Logo" 
             class="rivo9-logo" 
             (click)="navigateToLanding()" />
      </div>
    </div>
    
    <!-- Main Search Card -->
    <div class="search-card">
      
      <!-- Search Bar -->
      <div class="search-bar-container">
        <div class="search-input-wrapper" [class.focused]="isSearchFocused">
          <input type="text" 
                 class="search-input" 
                 [(ngModel)]="searchDomainNameOrUrl"
                 (keydown)="handleKeyDown($event)"
                 (focus)="onSearchFocus()"
                 (blur)="onSearchBlur()"
                 placeholder="Enter website URL"
                 [disabled]="isLoading"
                 [class.loading]="isLoading"
                 aria-label="Search for brand information">
          <div class="search-icon" (click)="findBrandInfo($event)">
            <i class="bi bi-search"></i>
          </div>
        </div>
        
        <!-- Error Message -->
        <div class="error-message" *ngIf="errorMessage">
          <i class="bi bi-exclamation-triangle-fill"></i>
          <span>{{ errorMessage }}</span>
        </div>
      </div>
      
      <!-- Recently Viewed Section -->
      <div class="recently-viewed-section" *ngIf="brands.length > 0">
        <div class="recently-viewed-header">
          <h3 class="recently-viewed-title">RECENTLY VIEWED</h3>
          <button class="clear-all-btn" (click)="clearAll()">Clear all</button>
        </div>
        
        <div class="recently-viewed-list">
          <div class="recently-viewed-item" 
               *ngFor="let brand of brands; let i = index"
               (click)="goToResults(brand.name)">
            
            <!-- Brand Icon -->
            <div class="brand-icon">
              <img *ngIf="brand.favicon && !brand.faviconError" 
                   [src]="brand.favicon" 
                   [alt]="brand.name" 
                   class="brand-favicon"
                   (error)="onFaviconError(i)">
              <div *ngIf="!brand.favicon || brand.faviconError" 
                   class="brand-placeholder">
                <span>{{ brand.name.charAt(0).toUpperCase() }}</span>
              </div>
            </div>
            
            <!-- Brand Info -->
            <div class="brand-info">
              <div class="brand-name">{{ brand.name }}</div>
              <div class="brand-url" *ngIf="brand.domain">{{ brand.domain }}</div>
            </div>
            
            <!-- Remove Button -->
            <button class="remove-btn" 
                    (click)="$event.stopPropagation(); removeBrand(i)"
                    title="Remove from history">
              <i class="bi bi-x"></i>
            </button>
          </div>
        </div>
      </div>
      
    </div>
    
    <!-- Back to Home Button -->
    <div class="back-to-home">
      <button class="back-btn" (click)="navigateToLanding()">
        &lt; Back to Home
      </button>
    </div>
    
  </div>

  <!-- Reusable Search Modal Component -->
  <app-search-modal></app-search-modal>
</div>
